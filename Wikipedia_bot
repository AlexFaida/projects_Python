!pip install wikipedia-api
!pip install aiogram

import asyncio

from wikipediaapi import Wikipedia
from aiogram import Bot, Dispatcher, F
from aiogram.types import Message
from aiogram.enums import ParseMode
from aiogram.filters import CommandStart

wiki = Wikipedia(language="ru", user_agent="Your_User_Agent_String")
dp = Dispatcher()


TOKEN = getenv("BOT_TOKEN", "YOUR_TOKEN_IS_HERE")
start_text = """
<b>ü¶â –ü—Ä–∏–≤–µ—Ç! –ë–æ—Ç –í–∏–∫–∏–ø–µ–¥–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –í–∏–∫–∏–ø–µ–¥–∏–∏.
–£–∑–Ω–∞–≤–∞–π—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —Ñ–∞–∫—Ç—ã, –∏—Å—Å–ª–µ–¥—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ–º—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—É—é –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É—è –º–æ–µ–≥–æ –±–æ—Ç–∞ –í–∏–∫–∏–ø–µ–¥–∏—é.</b>
"""

@dp.message(CommandStart())
async def start(message: Message):
    
    await message.answer_photo(
        photo = 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ-bXj45DNaiPJKpScNW4lDSrEKSv5-pRidIO1YCpkGqg&s',
        caption=start_text,
    )

@dp.message(F.text)
async def wwiki(message: Message): 
    query = message.text
    page = wiki.page(query)
    msg = await message.answer("üîé <b>–ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...</b>")
    await asyncio.sleep(0.5)
    if page.exists():
        await message.answer(f"<b>üåê {page.title}:\n\n{page.summary}\n\n<b>–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</b> -> <a href='{page.fullurl}'>–ö–ª–∏–∫</a></b>")
        await msg.delete()
    else:
        await message.reply("üö´ <b>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —è –Ω–µ —Å–º–æ–≥ –Ω–∞–π—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ —ç—Ç–æ–º—É –∑–∞–ø—Ä–æ—Å—É.</b>")
        await msg.delete()


async def main():
    bot = Bot(token=TOKEN, parse_mode=ParseMode.HTML)
    await dp.start_polling(bot)


if __name__ == "__main__":
    print("–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    try:
        asyncio.run(main())
    except Exception as e:
        print(e)
